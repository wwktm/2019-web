---
title: "Buy"
desc : "wwktm is an effort to gather experts, both national and international, and create an environment for new partnerships, collaborations and learning groups to be formed. We want to create a space that encourages participation and then the dynamics of the group will take over the direction."
author : "Web Weekend ktm"
keywords : "conference, nepal, web weekend kathmandu, tech conference, kathmandu"
image : "https://2018.wwktm.co/img/og.jpg"
type: "none"
---
<section class="hero">
  <div class="hero-body">
    <div class="container">
      <div class="hero-content">
        <h1 class="title">Buy Tickets</h1>
        <div class="subtitle">
          Bringing together the web community.
          <strong class="orange">Again.</strong>
        </div>

      </div>
      <a href="/">{{< svg >}}</a>
    </div>
  </div>
</section>

<section class="main-content">
  <div class="container">
    <div class="columns">
      <div class="column">
    <div class="columns is-centered">
      <div class="column is-half">
        <div class="ticket-block" style="padding: 0 0 20px 0">

<form id="ticket-form">
  <fieldset id="personal_details">
    <div class="field">
      <label class="label" for="full-name">Full Name *</label>
      <div class="control">
        <input class="input" type="text" placeholder="Lady Gaga" name="full-name" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="phone-number">Phone Number *</label>
      <div class="control">
        <input class="input" type="number" placeholder="009779812345678" name="phone-number" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="email-address">Email address *</label>
      <div class="control">
        <input class="input" type="email" placeholder="awesome@email.com" name="email-address" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="coming-from">Coming from (country) *</label>
      <div class="control">
        <input class="input" type="text" placeholder="Nepal" name="coming-from" required>
      </div>
    </div>

    <div class="field">
      <label class="label" for="company">Company</label>
      <div class="control">
        <input class="input" type="text" placeholder="StarShip Pvt. Ltd." name="company">
      </div>
    </div>

    <div class="field">
      <label class="label" for="position">Position</label>
      <div class="control">
        <input class="input" type="text" placeholder="Software Design Engineer" name="position">
      </div>
    </div>

    <div class="field">
      <label class="label" for="twitter">Twitter Handle</label>
      <div class="control">
        <input class="input" type="text" placeholder="weekend_web" name="twitter">
      </div>
    </div>

    <div class="field">
      <label class="label" for="picture">Link to Picture</label>
      <div class="control">
        <input class="input" type="text" placeholder="https://..." name="picture">
      </div>
      <p class="help">This will be shown on the website on the "attendess" page</p>
    </div>

    <div class="field">
      <label class="label" for="allergies">Meal Allergies (if any)</label>
      <div class="control">
        <input class="input" type="text" placeholder="Allergic to Peanuts" name="allergies">
      </div>
      <p class="help">We provide a buffet meal (with vegeterian options), tea/coffee during the day and some sweets to keep the sugar level high</p>
    </div>

    <div class="field">
      <label class="label" for="hike">Interested to Hike?</label>
      <div class="control">
        <div class="select">
          <select id="hike" name="hike">
            <option value="no">No</option>
            <option value="yes">Yes</option>
            <option value="maybe">Maybe</option>
          </select>
        </div>
      </div>
      <p class="help">This is just an intent to hike for us to plan. It's not a confirmation to the hike.</p>
    </div>

    <div class="field is-grouped">
      <div class="control">
        <button class="button is-success is-large is-rounded" data-next="payment" data-self="personal_details">Next</button>
      </div>
    </div>
  </fieldset>

  <fieldset id="payment" class="hidden">
    <div class="notification is-warning">
      <strong> Note : </strong>This form is only for collection information. Payment has to be done independetly via options provided below. <strong>wwktm doesn't process </strong> any payments at the moment
    </div>

    <div class="field">
      <label class="label">Ticket Type</label>
      <div class="control">
        <div class="select">
          <select id="ticket-type">
            <option value="regular" selected>Regular</option>
            <option value="community">Community</option>
          </select>
        </div><p class="help" style="font-size:1rem"></p>
      </div>
    </div>

    <div class="field">
      <label class="label">Payment Method</label>
      <div class="control">
        <div class="select">
          <select id="payment-method">
            <option value="esewa" selected>eSewa</option>
            <!--<option value="khalti">Khalti</option>-->
            <option value="cash">Cash</option>
            <option value="paypal">Paypal</option>
          </select>
        </div><p class="help" style="font-size:1rem"></p>
      </div>
    </div>

    <div class="field" id="address-location" class="hidden">
      <label class="label" for="address-location">Address Location (if cash)</label>
      <div class="control">
        <input class="input" type="text" placeholder="Sankhamul" name="address-location">
      </div>
    </div>

    <div class="field" id="coupon-code-field">
      <label class="label" for="coupon-code">Coupon Code</label>
      <div class="control">
        <input class="input" type="text" placeholder="WWKTM" name="coupon-code">
      </div>
    </div>

    <div class="field">
      <label class="label">Amount</label>
      <div class="control">
        <h2 id="amount"> NRs. 2750 </h2>
        <input type="hidden" type="text" name="amount" placeholder="">
      </div>
    </div>

    <div class="field">
      <label class="label" for="payment-reference">Payment Reference</label>
      <div class="control">
        <input class="input" type="text" name="payment-reference" placeholder="">
      </div>
      <p class="help" style="font-size:1rem"><strong>Note: </strong> Please make the payment and put the payment reference code in the field above</p>
    </div>

    <div class="field is-grouped">
      <div class="control">
        <div class="g-recaptcha" data-sitekey="6LfVg6wUAAAAAOhc2ppr_-tHEIt2LrjAApZ9t8Z2"></div>
        <button class="button is-success is-large is-rounded" id="submitForm" data-next="confirmation" data-self="payment">Submit</button>
        <button class="button is-large is-rounded is-light" data-self="payment" data-next="personal_details">Previous</button>
      </div>
    </div>
  </fieldset>

  <div id="confirmation" class="hidden">
    <div id="loadingState" align="center"><a class="button is-loading">Loading</a></div>
    <div id="successState" class="hidden">
      <div class="notification is-info">
        üëè Thank you, we have received your ticket request. We will verify all the information and send a confirmation email within the next 24 hours.
      </div>
      <div>
        <h3>What next from here?</h3>
        <br />
        <ol>
          <li> <strong>Share</strong> on twitter and facebook that you will be attending #wwktm. We will choose some of the best entries and giveaway #wwktm goodies on the event day.</li>
          <li> Invite your friends. Use the coupon code <strong>WWKTMANDFRIEND</strong> to get a 10% on the ticket price*.</li>
        </ol>
        <p> <small> *Discounts are not available on the early bird rates </small></p>
      </div>
    </div>
    <div id="errorState" class="hidden">
      <div class="notification is-danger">Apologies! We couldn't log your registration. While we are working on fixing this issue, please continue your registration via this <a href="https://forms.gle/bzE5GsHoLg5Nzxds7">google form </a></div>
    </div>
  </div>
</form>
</div></div> <!-- ticket-block, column -->

<div class="column">
  <p> Those who choose <strong>Community</strong> ticket will get a mention here, on the website, if you wish </p>
  <hr >
  <p>All classes of tickets are sold on a first-come, first-serve basis with no refunds offered (ticket transfers are allowed.)</p>
  <hr >
  <p>Your ticket provides you access to all social events, sessions for a networking opportunity with eminent speakers, and other attendees. The ticket also covers lunch and refreshments. </p>
  <p><strong>The ticket doesn't include the hike on the second day of the conference</strong></p>
  <hr />
  <p class="lead">In case of any further assistance/enquiry or encouragement to help solidify arrangements with your employer, please <a href="mailto:tickets@wwktm.co">reach out</a> to us.</p>
  <hr />

</div> </div> </div> </section> <!-- container, columns, column -->

<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script type="text/javascript">
//Object assign polyfill from MDN
if (typeof Object.assign !== 'function') {
  // Must be writable: true, enumerable: false, configurable: true
  Object.defineProperty(Object, "assign", {
    value: function assign(target, varArgs) { // .length of function is 2
      'use strict';
      if (target === null || target === undefined) {
        throw new TypeError('Cannot convert undefined or null to object');
      }

      var to = Object(target);

      for (var index = 1; index < arguments.length; index++) {
        var nextSource = arguments[index];

        if (nextSource !== null && nextSource !== undefined) { 
          for (var nextKey in nextSource) {
            // Avoid bugs when hasOwnProperty is shadowed
            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
              to[nextKey] = nextSource[nextKey];
            }
          }
        }
      }
      return to;
    },
    writable: true,
    configurable: true
  });
  }

function getHashValue(key) {
  var matches = location.hash.match(key);
  return matches ? matches[1] : null;
}
</script>

<script type="text/javascript">
  var communityPrice = {
    "npr" : 4000,
    "usd" : 50
  }
  var initialPrice = {
    "npr" : 2750,
    "usd" : 30
  }
  var defaultPrice = Object.assign({}, initialPrice)

  var amountBlock = document.getElementById("amount")
  var paymentMethod = document.getElementById("ticket-form").elements["payment-method"]
  var ticketType = document.getElementById("ticket-form").elements["ticket-type"]
  var couponCode = document.getElementById("ticket-form").elements["coupon-code"]
  var couponCodeField = document.getElementById("coupon-code-field")
  var submitForm = document.getElementById("submitForm")

  function getNPRAmount(options) {
    var price = defaultPrice.npr
    couponCodeField.classList.remove("hidden")

    if(ticketType.value === "community"){
      couponCodeField.classList.add("hidden")
      price = communityPrice.npr
    }
    if(options && options.isCash === true)
      return "NRs. " + (price + 50)
    return "NRs. " + price
  }
  function getUSDAmount() {
    var price = defaultPrice.usd
    couponCodeField.classList.remove("hidden")

    if(ticketType.value === "community"){
      couponCodeField.classList.add("hidden")
      price = communityPrice.usd
    }
    return "USD. " + price
  }

  function updatePrices() {
    document.getElementById("address-location").classList.add("hidden")
    var paymentMethod = document.getElementById("ticket-form").elements["payment-method"]
    var helpContainer = paymentMethod.parentElement.nextSibling
    var amountInput = document.getElementById("ticket-form").elements["amount"]
    switch(paymentMethod.value) {
      case "esewa":
        amountBlock.innerHTML = getNPRAmount()
        amountInput.value = getNPRAmount()
        helpContainer.innerHTML = "Please transfer the amount to esewa id tickets@wwktm.co"
        return
      case "khalti":
        amountBlock.innerHTML = getNPRAmount()
        amountInput.value = getNPRAmount()
        helpContainer.innerHTML = "Please transfer the amount to khalti id tickets@wwktm.co"
        return
      case "cash":
        document.getElementById("address-location").classList.remove("hidden")
        amountBlock.innerHTML = getNPRAmount({isCash: true})
        amountInput.value = getNPRAmount({isCash: true})
        helpContainer.innerHTML = "Cash is available inside Ring Road. We will contact you in the next days."
        return
      case "paypal":
        amountBlock.innerHTML = getUSDAmount()
        amountInput.value = getUSDAmount()
        helpContainer.innerHTML = "Please transfer the amount to paypal id tickets@wwktm.co"
        return
    }
  }

  function handleCouponCodeChange(e) {
    if(e.target.value === '') {
      handlePriceUpdate(initialPrice)
      return;
    }

    var couponFieldControl = couponCodeField.querySelector('.control')
    couponFieldControl && couponFieldControl.classList.add("is-loading")
    fetchOptions = {
      method: "POST",
      body: JSON.stringify({ "coupon_code":e.target.value })
    }
    fetch("/.netlify/functions/coupon_code", fetchOptions)
    .then(fetchToJson)
    .then(handlePriceUpdate)
    .then(function() {
      couponFieldControl && couponFieldControl.classList.remove("is-loading")
    })
    .catch(function(error) {
      couponFieldControl && couponFieldControl.classList.add("is-loading")
    })
  }

  function handlePriceUpdate(responseJSON) {
    if(responseJSON.npr && responseJSON.usd) {
      defaultPrice.npr = parseInt(responseJSON.npr)
      defaultPrice.usd= parseInt(responseJSON.usd)
    }
    updatePrices()
  }

  function fetchToJson(response) {
    return response.json()
  }

  async function handleSubmitForm() {
    var ticketForm = document.getElementById("ticket-form").elements
    var submitParams = {
      "full-name" : ticketForm["full-name"].value,
      "phone-number" : ticketForm["phone-number"].value,
      "email-address" : ticketForm["email-address"].value,
      "coming-from" : ticketForm["coming-from"].value,
      "company" : ticketForm["company"].value,
      "position" : ticketForm["position"].value,
      "twitter" : ticketForm["twitter"].value,
      "picture" : ticketForm["picture"].value,
      "allergies" : ticketForm["allergies"].value,
      "hike" : ticketForm["hike"].value,
      "ticket-type" : ticketForm["ticket-type"].value,
      "payment-method" : ticketForm["payment-method"].value,
      "address-location" : ticketForm["address-location"].value,
      "coupon-code" : ticketForm["coupon-code"].value,
      "amount" : ticketForm["amount"].value,
      "payment-reference" : ticketForm["payment-reference"].value,
    }

    fetchOptions = {
      method: "POST",
      body: JSON.stringify(submitParams)
    }

    try {
      var success = await fetch("/.netlify/functions/register_ticket", fetchOptions)
      .then(fetchToJson)
      .then((response) => {
        // rejoice
        document.getElementById("loadingState").classList.add("hidden")
        if(response.err !== undefined) {
          document.getElementById("errorState").classList.remove("hidden")
          document.getElementById("successState").classList.add("hidden")
        } else {
          document.getElementById("successState").classList.remove("hidden")
        }
      })
    } catch (e) {
      console.error(e)
      return false
    }
  }

  /* page Switch */
  var buttons = document.querySelectorAll("#ticket-form .button");
  function handlePageSwitch(e) {
    e.preventDefault();
    var dataSet = e.target.dataset;
    var current = document.getElementById(dataSet["self"])

    // check if form is valid
    var valid = true
    for( var elementIndex in current.elements ) {
      var element = current.elements[elementIndex]
      if(element.checkValidity && element.checkValidity() === false) {
        element.reportValidity()
        valid = false
        break
      }
    }


    if(valid === true) {
      if(e.target.id === "submitForm"){
        var response = grecaptcha.getResponse();

        // WELP, YOU BE A BOT! STAY AWAY
        if(response.length == 0)
          return;

        var submitted = handleSubmitForm()
        if(submitted === false)
          return
      }
      document.getElementById(dataSet["self"]).classList.add("hidden")
      document.getElementById(dataSet["next"]).classList.remove("hidden")
      document.getElementById(dataSet["next"]).scrollIntoView(true)
    }
  }

  /* event Handlers */
  //submitForm.addEventListener('click', handleSubmitForm)
  for (var button of buttons) button.addEventListener('click', handlePageSwitch)
  paymentMethod.addEventListener('change', updatePrices)
  ticketType.addEventListener('change', updatePrices)
  couponCode.addEventListener('blur', handleCouponCodeChange)

  function init() {
    if(getHashValue('community') !== null)
      ticketType.value = 'community'

    updatePrices()
  }
  init()

</script>
